# Auto-generated llama-swap configuration
# Models directory: /Users/temme/.clara/llama-models
healthCheckTimeout: 30
logLevel: info

models:
  "deepseek-r1-0528:8b":
    proxy: "http://127.0.0.1:9999"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/DeepSeek-R1-0528-Qwen3-8B-IQ4_NL.gguf"
      --port 9999 --jinja --n-gpu-layers 40 --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "llama3.2:1b":
    proxy: "http://127.0.0.1:9999"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/Llama-3.2-1B-Instruct-Q4_K_M.gguf"
      --port 9999 --jinja --n-gpu-layers 22 --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "qwen2.5:3b":
    proxy: "http://127.0.0.1:9999"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/Qwen2.5-VL-3B-Instruct-q4_k_m.gguf"
      --port 9999 --jinja --n-gpu-layers 26
      --mmproj "/Users/temme/.clara/llama-models/Qwen2.5-VL-3B-Instruct-mmproj-f16.gguf" --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "qwen3:0.6b":
    proxy: "http://127.0.0.1:9999"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/Qwen3-0.6B-Q4_K_M.gguf"
      --port 9999 --jinja --n-gpu-layers 22 --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "qwen3:4b":
    proxy: "http://127.0.0.1:9999"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/Qwen3-4B-IQ4_NL.gguf"
      --port 9999 --jinja --n-gpu-layers 22 --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "qwen3:8b":
    proxy: "http://127.0.0.1:9999"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/Qwen3-8B-Q4_K_M.gguf"
      --port 9999 --jinja --n-gpu-layers 40 --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "e5-large-v2-q4-0:large":
    proxy: "http://127.0.0.1:9998"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/e5-large-v2.Q4_0.gguf"
      --port 9998 --jinja --n-gpu-layers 22 --pooling mean --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "gemma3:4b":
    proxy: "http://127.0.0.1:9999"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/gemma-3-4b-it-Q4_K_M.gguf"
      --port 9999 --jinja --n-gpu-layers 32 --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "mxbai-embed-large:embed":
    proxy: "http://127.0.0.1:9998"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/mxbai-embed-large-v1.Q4_K_M.gguf"
      --port 9998 --jinja --n-gpu-layers 22 --pooling mean --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "nomic-embed-text-v1-5":
    proxy: "http://127.0.0.1:9998"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/nomic-embed-text-v1.5.Q2_K.gguf"
      --port 9998 --jinja --n-gpu-layers 22 --pooling mean --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

  "tinyllama:1.1b":
    proxy: "http://127.0.0.1:9999"
    cmd: |
      "/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64/llama-server"
      -m "/Users/temme/.clara/llama-models/tinyllama-1.1b-chat-v1.0.Q4_0.gguf"
      --port 9999 --jinja --n-gpu-layers 22 --threads 5 --ctx-size 8192 --batch-size 256 --ubatch-size 256 --keep 1024 --defrag-thold 0.1 --mlock --parallel 1 --flash-attn --cont-batching
    env:
      - "DYLD_LIBRARY_PATH=/Users/temme/Documents/ClaraVerse/electron/llamacpp-binaries/darwin-arm64:"
    ttl: 300

groups:
  "embedding_models":
    # Allow multiple embedding models to run together
    swap: false
    # Don't unload other groups when embedding models start
    exclusive: false
    # Prevent other groups from unloading embedding models
    persistent: true
    members:
      - "e5-large-v2-q4-0:large"
      - "mxbai-embed-large:embed"
      - "nomic-embed-text-v1-5"

  "regular_models":
    # Only one regular model at a time (traditional behavior)
    swap: true
    # Unload other non-persistent groups when loading
    exclusive: true
    members:
      - "deepseek-r1-0528:8b"
      - "llama3.2:1b"
      - "qwen2.5:3b"
      - "qwen3:0.6b"
      - "qwen3:4b"
      - "qwen3:8b"
      - "gemma3:4b"
      - "tinyllama:1.1b"
